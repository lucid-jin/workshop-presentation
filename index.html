<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>레크레이션 행사</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            overflow: hidden;
        }

        .presentation-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .slide {
            width: 90%;
            max-width: 1200px;
            height: 80vh;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            display: none;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .slide.active {
            display: flex;
        }

        .slide h1 {
            font-size: 3.5em;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .slide h2 {
            font-size: 2.5em;
            margin-bottom: 30px;
            text-align: center;
            color: #FFD700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .slide h3 {
            font-size: 2em;
            margin-bottom: 20px;
            color: #87CEEB;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .teams-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .team-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: transform 0.3s ease;
        }

        .team-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .team-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 10px;
            text-align: center;
        }

        .team-members {
            font-size: 0.9em;
            line-height: 1.4;
            text-align: center;
        }

        .timeline {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }

        .timeline-item {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 15px 20px;
            border-left: 5px solid #FFD700;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .time {
            font-weight: bold;
            color: #FFD700;
            font-size: 1.2em;
        }

        .activity {
            flex: 1;
            margin-left: 20px;
            font-size: 1.1em;
        }

        .game-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .game-title {
            font-size: 1.4em;
            color: #FFD700;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .game-duration {
            color: #87CEEB;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .navigation {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 1000;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 10px;
            padding: 15px 25px;
            color: white;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .slide-counter {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 10px 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .emoji {
            font-size: 1.5em;
            margin-right: 10px;
        }

        .highlight {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: bold;
        }

        .center-text {
            text-align: center;
            font-size: 1.3em;
            line-height: 1.6;
        }

        .materials-list {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .material-item {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .music-player {
            position: fixed;
            top: 30px;
            left: 30px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 15px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            min-width: 300px;
            z-index: 1001;
            cursor: move;
            user-select: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }

        .music-player:hover {
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.7);
            transform: translateY(-2px);
        }

        .music-player.dragging {
            transform: rotate(3deg) scale(1.05);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
            z-index: 1002;
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            cursor: move;
            padding: 5px;
        }

        .player-title {
            color: #FFD700;
            font-size: 1.1em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .drag-indicator {
            color: #999;
            font-size: 1.2em;
            cursor: move;
        }

        .minimize-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2em;
            padding: 5px 8px;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .minimize-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .current-track {
            color: white;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px;
            border-radius: 8px;
        }

        .progress-container {
            background: rgba(255, 255, 255, 0.2);
            height: 6px;
            border-radius: 3px;
            margin-bottom: 15px;
            overflow: hidden;
            cursor: pointer;
        }

        .progress-bar {
            background: linear-gradient(90deg, #FFD700, #FFA500);
            height: 100%;
            width: 0%;
            border-radius: 3px;
            transition: width 0.1s;
        }

        .player-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: white;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .play-btn {
            width: 50px;
            height: 50px;
            font-size: 1.2em;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .volume-slider {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: #FFD700;
            border-radius: 50%;
            cursor: pointer;
        }

        .volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #FFD700;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .playlist {
            max-height: 150px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #FFD700 rgba(255, 255, 255, 0.1);
        }

        .playlist::-webkit-scrollbar {
            width: 6px;
        }

        .playlist::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .playlist::-webkit-scrollbar-thumb {
            background: #FFD700;
            border-radius: 3px;
        }

        .playlist-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
            margin-bottom: 2px;
        }

        .playlist-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .playlist-item.active {
            background: rgba(255, 215, 0, 0.2);
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .track-info {
            flex: 1;
        }

        .track-name {
            color: white;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .track-artist {
            color: #ccc;
            font-size: 0.8em;
        }

        .track-duration {
            color: #999;
            font-size: 0.8em;
            font-weight: bold;
        }

        .music-player.minimized {
            width: 60px;
            height: 60px;
            padding: 10px;
            overflow: hidden;
        }

        .music-player.minimized > *:not(.minimize-btn) {
            display: none;
        }

        .music-player.minimized .minimize-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.2em;
        }

        /* 반응형 디자인 */
        @media (max-width: 768px) {
            .music-player {
                min-width: 250px;
                left: 10px;
                top: 10px;
            }

            .teams-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .game-list {
                grid-template-columns: 1fr;
            }

            .materials-list {
                grid-template-columns: repeat(2, 1fr);
            }

            .slide h1 {
                font-size: 2.5em;
            }

            .slide h2 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
<div class="presentation-container">
    <!-- 드래그 가능한 음악 플레이어 -->
    <div class="music-player" id="musicPlayer">
        <div class="player-header" id="playerHeader">
            <div class="player-title">
                <span class="drag-indicator">⋮⋮</span>
                🎵 BGM 플레이어
            </div>
            <button class="minimize-btn" onclick="togglePlayer()">─</button>
        </div>
        <div class="current-track" id="currentTrack">음악을 선택해주세요</div>
        <div class="progress-container" onclick="seekTrack(event)">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="player-controls">
            <button class="control-btn" onclick="previousTrack()" title="이전 곡">⏮</button>
            <button class="control-btn play-btn" onclick="togglePlay()" id="playBtn" title="재생/정지">▶</button>
            <button class="control-btn" onclick="nextTrack()" title="다음 곡">⏭</button>
            <button class="control-btn" onclick="toggleShuffle()" id="shuffleBtn" title="셔플">🔀</button>
        </div>
        <div class="volume-control">
            <span style="color: white;">🔊</span>
            <input type="range" class="volume-slider" min="0" max="100" value="70" id="volumeSlider" onchange="changeVolume()" title="볼륨">
            <span style="color: #999; font-size: 0.8em;" id="volumeDisplay">70%</span>
        </div>
        <div class="playlist" id="playlist">
            <div class="playlist-item active" onclick="selectTrack(0)">
                <div class="track-info">
                    <div class="track-name">Uptown Funk</div>
                    <div class="track-artist">Bruno Mars ft. Mark Ronson</div>
                </div>
                <div class="track-duration">4:30</div>
            </div>
            <div class="playlist-item" onclick="selectTrack(1)">
                <div class="track-info">
                    <div class="track-name">Happy</div>
                    <div class="track-artist">Pharrell Williams</div>
                </div>
                <div class="track-duration">3:53</div>
            </div>
            <div class="playlist-item" onclick="selectTrack(2)">
                <div class="track-info">
                    <div class="track-name">Can't Stop the Feeling!</div>
                    <div class="track-artist">Justin Timberlake</div>
                </div>
                <div class="track-duration">3:56</div>
            </div>
            <div class="playlist-item" onclick="selectTrack(3)">
                <div class="track-info">
                    <div class="track-name">Good 4 U</div>
                    <div class="track-artist">Olivia Rodrigo</div>
                </div>
                <div class="track-duration">2:58</div>
            </div>
            <div class="playlist-item" onclick="selectTrack(4)">
                <div class="track-info">
                    <div class="track-name">Levitating</div>
                    <div class="track-artist">Dua Lipa</div>
                </div>
                <div class="track-duration">3:23</div>
            </div>
        </div>
    </div>

    <!-- 슬라이드 1: 타이틀 -->
    <div class="slide active">
        <h1>🎉 레크레이션 행사 🎉</h1>
        <div class="center-text">
            <p style="font-size: 1.8em; margin-bottom: 30px;">팀워크와 소통을 위한 즐거운 시간</p>
            <p style="font-size: 1.2em; opacity: 0.9;">모든 팀원이 함께하는 특별한 하루</p>
        </div>
    </div>

    <!-- 슬라이드 2: 조 구성 1 -->
    <div class="slide">
        <h2>🏆 조 구성</h2>
        <div class="teams-grid">
            <div class="team-card">
                <div class="team-name">조 1. 높은 기준 (5명)</div>
                <div class="team-members">
                    강준호, 권동호, 권소희<br>
                    박찬혜, 김기욱
                </div>
            </div>
            <div class="team-card">
                <div class="team-name">조 2. 빠른 판단과 실행 (4명)</div>
                <div class="team-members">
                    김상엽, 김태형<br>
                    김지영, 김지현
                </div>
            </div>
            <div class="team-card">
                <div class="team-name">조 3. 따듯한 팀워크 (5명)</div>
                <div class="team-members">
                    김소엽, 채재민, 이나은<br>
                    박석류, 황수영
                </div>
            </div>
            <div class="team-card">
                <div class="team-name">조 4. 고객과 함께하는 팀 (4명)</div>
                <div class="team-members">
                    방은영, 심은철<br>
                    이준모, 이재규
                </div>
            </div>
            <div class="team-card">
                <div class="team-name">조 5. 끊임없는 성장 (4명)</div>
                <div class="team-members">
                    이주현, 최나영<br>
                    최우혁, 노성균
                </div>
            </div>
            <div class="team-card">
                <div class="team-name">조 6. 주도적인 태도 (5명)</div>
                <div class="team-members">
                    티모시, 한세희, 방은선<br>
                    김가람, 유예지
                </div>
            </div>
        </div>
    </div>

    <!-- 슬라이드 3: 타임라인 -->
    <div class="slide">
        <h2>⏰ 행사 타임라인</h2>
        <div class="timeline">
            <div class="timeline-item">
                <div class="time">3:00 - 3:30</div>
                <div class="activity">집합 및 경영진 연설 (5분)</div>
            </div>
            <div class="timeline-item">
                <div class="time">3:40 - 4:20</div>
                <div class="activity">게임 1: 온보딩 게임 + 종이비행기 대회</div>
            </div>
            <div class="timeline-item">
                <div class="time">4:25 - 4:40</div>
                <div class="activity">휴식 시간</div>
            </div>
            <div class="timeline-item">
                <div class="time">4:40 - 5:25</div>
                <div class="activity">게임 2: 사진/영상 미션</div>
            </div>
            <div class="timeline-item">
                <div class="time">5:25 - 6:10</div>
                <div class="activity">게임 3: 이어그리기 + 릴레이 퀴즈</div>
            </div>
            <div class="timeline-item">
                <div class="time">6:00 - 6:30</div>
                <div class="activity">시상식 & 경품 추첨</div>
            </div>
            <div class="timeline-item">
                <div class="time">7:00</div>
                <div class="activity">회식</div>
            </div>
        </div>
    </div>

    <!-- 슬라이드 4: 게임 소개 1 -->
    <div class="slide">
        <h2>🎮 게임 소개 - 1부</h2>
        <div class="game-list">
            <div class="game-card">
                <div class="game-title">🤝 온보딩 게임</div>
                <div class="game-duration">⏱️ 10분</div>
                <p>• 팀명과 관련된 공통점 찾기</p>
                <p>• 각 조에서 대표 1명 발표</p>
                <p>• 가장 창의적인 답안 시상</p>
            </div>
            <div class="game-card">
                <div class="game-title">✈️ 종이비행기 대회</div>
                <div class="game-duration">⏱️ 50분</div>
                <p>• 1라운드: 가장 먼 거리/비행 시간</p>
                <p>• 2라운드: 목표 정확도</p>
                <p>• 다양한 재료로 제작 가능</p>
            </div>
        </div>
        <h3>📋 준비물</h3>
        <div class="materials-list">
            <div class="material-item">스케치북 10개 + 펜</div>
            <div class="material-item">색종이 30개</div>
            <div class="material-item">A4용지, 신문지</div>
            <div class="material-item">노트북 + HDMI</div>
            <div class="material-item">스피커</div>
            <div class="material-item">타이머</div>
        </div>
    </div>

    <!-- 슬라이드 5: 게임 소개 2 -->
    <div class="slide">
        <h2>🎮 게임 소개 - 2부</h2>
        <div class="game-list">
            <div class="game-card">
                <div class="game-title">📸 사진/영상 미션</div>
                <div class="game-duration">⏱️ 30분</div>
                <p>• 팀 이름에 맞는 컨셉으로 촬영</p>
                <p>• 코어 밸류 표현하기</p>
                <p>• DM으로 제출</p>
            </div>
            <div class="game-card">
                <div class="game-title">🎨 이어그리기</div>
                <div class="game-duration">⏱️ 20분</div>
                <p>• 5초씩 릴레이로 그리기</p>
                <p>• 다양한 주제 제시</p>
                <p>• 정답 맞추기 점수제</p>
            </div>
            <div class="game-card">
                <div class="game-title">🧠 릴레이 퀴즈</div>
                <div class="game-duration">⏱️ 30분</div>
                <p>• 팀원 릴레이로 문제 풀기</p>
                <p>• 20문제 준비</p>
                <p>• 가장 많이 맞힌 팀 승리</p>
            </div>
        </div>
    </div>

    <!-- 슬라이드 6: 추가 게임 (런닝맨) -->
    <div class="slide">
        <h2>🏃‍♂️ 추가 게임 - 런닝맨 (1시간)</h2>
        <div class="timeline">
            <div class="timeline-item">
                <div class="time">미션 1</div>
                <div class="activity">📸 사진/셀카 미션 - 지정 장소에서 팀 사진 촬영</div>
            </div>
            <div class="timeline-item">
                <div class="time">미션 2</div>
                <div class="activity">🏃‍♂️ 달려라 미션 - 특정 인물/물건 가져오기</div>
            </div>
            <div class="timeline-item">
                <div class="time">미션 3</div>
                <div class="activity">🎭 몸으로 말해요 - 음악 장르 표현하기</div>
            </div>
            <div class="timeline-item">
                <div class="time">미션 4</div>
                <div class="activity">🧠 릴레이 퀴즈 - 팀원 5명 릴레이</div>
            </div>
            <div class="timeline-item">
                <div class="time">미션 5</div>
                <div class="activity">💬 단어 연결 게임 - 창의적인 문장 만들기</div>
            </div>
            <div class="timeline-item">
                <div class="time">마무리</div>
                <div class="activity">🏆 정리 & 시상 - 점수 합산 후 승리팀 시상</div>
            </div>
        </div>
    </div>

    <!-- 슬라이드 7: 시상 및 마무리 -->
    <div class="slide">
        <h2>🏆 시상 및 마무리</h2>
        <div class="center-text">
            <h3 style="color: #FFD700; margin-bottom: 30px;">🥇 우승팀 특전</h3>
            <p style="font-size: 1.4em; margin-bottom: 20px;">코어밸류 응모함 우선 추첨권!</p>

            <h3 style="color: #87CEEB; margin: 40px 0 30px 0;">🎁 경품 추첨</h3>
            <p style="font-size: 1.2em; margin-bottom: 20px;">모든 참가자 대상</p>
            <p style="font-size: 1.2em; margin-bottom: 40px;">다양한 경품이 기다리고 있어요!</p>

            <h3 style="color: #98FB98; margin: 40px 0 20px 0;">🍽️ 회식</h3>
            <p style="font-size: 1.3em;">오후 7시부터 즐거운 회식 시간!</p>
        </div>
    </div>

    <!-- 슬라이드 8: 마지막 인사 -->
    <div class="slide">
        <h1>🎊 함께 만드는 즐거운 추억 🎊</h1>
        <div class="center-text">
            <p style="font-size: 2em; margin-bottom: 40px;">모든 팀원의 적극적인 참여를</p>
            <p style="font-size: 2em; margin-bottom: 40px; color: #FFD700;">부탁드립니다!</p>
            <p style="font-size: 1.5em; opacity: 0.9;">오늘 하루 즐거운 시간 되세요! 🌟</p>
        </div>
    </div>
</div>

<div class="slide-counter">
    <span id="currentSlide">1</span> / <span id="totalSlides">8</span>
</div>

<div class="navigation">
    <button class="nav-btn" onclick="previousSlide()">◀ 이전</button>
    <button class="nav-btn" onclick="nextSlide()">다음 ▶</button>
    <button class="nav-btn" onclick="toggleFullscreen()">전체화면</button>
</div>

<script>
    let currentSlideIndex = 0;
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;

    // 음악 플레이어 관련 변수
    let currentTrackIndex = 0;
    let isPlaying = false;
    let isPlayerMinimized = false;
    let progressInterval;
    let currentProgress = 0;
    let isShuffleMode = false;
    let playedTracks = [];

    // 드래그 관련 변수
    let isDragging = false;
    let dragStartX = 0;
    let dragStartY = 0;
    let playerStartX = 0;
    let playerStartY = 0;

    const playlist = [
        { name: "Uptown Funk", artist: "Bruno Mars ft. Mark Ronson", duration: "4:30", durationSeconds: 270 },
        { name: "Happy", artist: "Pharrell Williams", duration: "3:53", durationSeconds: 233 },
        { name: "Can't Stop the Feeling!", artist: "Justin Timberlake", duration: "3:56", durationSeconds: 236 },
        { name: "Good 4 U", artist: "Olivia Rodrigo", duration: "2:58", durationSeconds: 178 },
        { name: "Levitating", artist: "Dua Lipa", duration: "3:23", durationSeconds: 203 }
    ];

    document.getElementById('totalSlides').textContent = totalSlides;

    // 슬라이드 관련 함수들
    function showSlide(index) {
        slides.forEach(slide => slide.classList.remove('active'));
        slides[index].classList.add('active');
        document.getElementById('currentSlide').textContent = index + 1;
    }

    function nextSlide() {
        currentSlideIndex = (currentSlideIndex + 1) % totalSlides;
        showSlide(currentSlideIndex);
    }

    function previousSlide() {
        currentSlideIndex = (currentSlideIndex - 1 + totalSlides) % totalSlides;
        showSlide(currentSlideIndex);
    }

    function toggleFullscreen() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
        } else {
            document.exitFullscreen();
        }
    }

    // 드래그 앤 드롭 기능
    function initializeDrag() {
        const player = document.getElementById('musicPlayer');
        const header = document.getElementById('playerHeader');

        header.addEventListener('mousedown', startDrag);
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', stopDrag);

        // 터치 이벤트 지원
        header.addEventListener('touchstart', startDragTouch);
        document.addEventListener('touchmove', dragTouch);
        document.addEventListener('touchend', stopDrag);
    }

    function startDrag(e) {
        if (e.target.closest('.minimize-btn')) return;

        isDragging = true;
        const player = document.getElementById('musicPlayer');
        const rect = player.getBoundingClientRect();

        dragStartX = e.clientX;
        dragStartY = e.clientY;
        playerStartX = rect.left;
        playerStartY = rect.top;

        player.classList.add('dragging');
        e.preventDefault();
    }

    function startDragTouch(e) {
        if (e.target.closest('.minimize-btn')) return;

        const touch = e.touches[0];
        isDragging = true;
        const player = document.getElementById('musicPlayer');
        const rect = player.getBoundingClientRect();

        dragStartX = touch.clientX;
        dragStartY = touch.clientY;
        playerStartX = rect.left;
        playerStartY = rect.top;

        player.classList.add('dragging');
        e.preventDefault();
    }

    function drag(e) {
        if (!isDragging) return;

        const player = document.getElementById('musicPlayer');
        const deltaX = e.clientX - dragStartX;
        const deltaY = e.clientY - dragStartY;

        const newX = Math.max(0, Math.min(window.innerWidth - player.offsetWidth, playerStartX + deltaX));
        const newY = Math.max(0, Math.min(window.innerHeight - player.offsetHeight, playerStartY + deltaY));

        player.style.left = newX + 'px';
        player.style.top = newY + 'px';

        e.preventDefault();
    }

    function dragTouch(e) {
        if (!isDragging) return;

        const touch = e.touches[0];
        const player = document.getElementById('musicPlayer');
        const deltaX = touch.clientX - dragStartX;
        const deltaY = touch.clientY - dragStartY;

        const newX = Math.max(0, Math.min(window.innerWidth - player.offsetWidth, playerStartX + deltaX));
        const newY = Math.max(0, Math.min(window.innerHeight - player.offsetHeight, playerStartY + deltaY));

        player.style.left = newX + 'px';
        player.style.top = newY + 'px';

        e.preventDefault();
    }

    function stopDrag() {
        if (isDragging) {
            isDragging = false;
            const player = document.getElementById('musicPlayer');
            player.classList.remove('dragging');
        }
    }

    // 음악 플레이어 함수들
    function togglePlayer() {
        const player = document.getElementById('musicPlayer');
        const btn = player.querySelector('.minimize-btn');
        isPlayerMinimized = !isPlayerMinimized;

        if (isPlayerMinimized) {
            player.classList.add('minimized');
            btn.textContent = '🎵';
            btn.title = '플레이어 펼치기';
        } else {
            player.classList.remove('minimized');
            btn.textContent = '─';
            btn.title = '플레이어 최소화';
        }
    }

    function selectTrack(index) {
        currentTrackIndex = index;
        updateCurrentTrack();
        updatePlaylistHighlight();
        resetProgress();
        if (isPlaying) {
            startProgress();
        }
    }

    function updateCurrentTrack() {
        const track = playlist[currentTrackIndex];
        document.getElementById('currentTrack').textContent = `${track.name} - ${track.artist}`;
    }

    function updatePlaylistHighlight() {
        const playlistItems = document.querySelectorAll('.playlist-item');
        playlistItems.forEach((item, index) => {
            if (index === currentTrackIndex) {
                item.classList.add('active');
            } else {
                item.classList.remove('active');
            }
        });
    }

    function togglePlay() {
        const playBtn = document.getElementById('playBtn');
        isPlaying = !isPlaying;

        if (isPlaying) {
            playBtn.textContent = '⏸';
            playBtn.title = '일시정지';
            startProgress();
            if (currentTrackIndex === 0 && currentProgress === 0) {
                updateCurrentTrack();
            }
        } else {
            playBtn.textContent = '▶';
            playBtn.title = '재생';
            stopProgress();
        }
    }

    function startProgress() {
        if (progressInterval) clearInterval(progressInterval);

        const duration = playlist[currentTrackIndex].durationSeconds;
        const stepTime = (duration * 1000) / 100; // 100단계로 나누어서 진행

        progressInterval = setInterval(() => {
            if (currentProgress >= 100) {
                if (isShuffleMode) {
                    playRandomTrack();
                } else {
                    nextTrack();
                }
                return;
            }
            currentProgress += 1;
            document.getElementById('progressBar').style.width = currentProgress + '%';
        }, stepTime);
    }

    function stopProgress() {
        if (progressInterval) {
            clearInterval(progressInterval);
            progressInterval = null;
        }
    }

    function resetProgress() {
        currentProgress = 0;
        document.getElementById('progressBar').style.width = '0%';
        stopProgress();
    }

    function seekTrack(e) {
        const progressContainer = e.currentTarget;
        const rect = progressContainer.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const percentage = (clickX / rect.width) * 100;

        currentProgress = Math.max(0, Math.min(100, percentage));
        document.getElementById('progressBar').style.width = currentProgress + '%';

        if (isPlaying) {
            stopProgress();
            startProgress();
        }
    }

    function nextTrack() {
        currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
        selectTrack(currentTrackIndex);
        if (isPlaying) {
            startProgress();
        }
    }

    function previousTrack() {
        currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
        selectTrack(currentTrackIndex);
        if (isPlaying) {
            startProgress();
        }
    }

    function toggleShuffle() {
        const shuffleBtn = document.getElementById('shuffleBtn');
        isShuffleMode = !isShuffleMode;

        if (isShuffleMode) {
            shuffleBtn.style.color = '#FFD700';
            shuffleBtn.title = '셔플 해제';
            playedTracks = [];
        } else {
            shuffleBtn.style.color = 'white';
            shuffleBtn.title = '셔플 모드';
        }
    }

    function playRandomTrack() {
        if (playedTracks.length >= playlist.length - 1) {
            playedTracks = [];
        }

        let randomIndex;
        do {
            randomIndex = Math.floor(Math.random() * playlist.length);
        } while (randomIndex === currentTrackIndex || playedTracks.includes(randomIndex));

        playedTracks.push(currentTrackIndex);
        selectTrack(randomIndex);

        if (isPlaying) {
            startProgress();
        }
    }

    function changeVolume() {
        const volume = document.getElementById('volumeSlider').value;
        document.getElementById('volumeDisplay').textContent = volume + '%';
        // 실제 오디오 볼륨 조절은 여기서 구현
        console.log('볼륨 변경:', volume + '%');
    }

    // 키보드 네비게이션
    document.addEventListener('keydown', function(e) {
        // 음악 플레이어가 최소화되어 있지 않을 때만 음악 단축키 작동
        const musicKeys = ['p', 'P', 'n', 'N', 'b', 'B', 'm', 'M', 's', 'S'];

        if (e.key === 'ArrowRight' || e.key === ' ') {
            e.preventDefault();
            nextSlide();
        } else if (e.key === 'ArrowLeft') {
            e.preventDefault();
            previousSlide();
        } else if (e.key === 'F11') {
            e.preventDefault();
            toggleFullscreen();
        } else if (e.key === 'p' || e.key === 'P') {
            e.preventDefault();
            togglePlay();
        } else if (e.key === 'n' || e.key === 'N') {
            e.preventDefault();
            nextTrack();
        } else if (e.key === 'b' || e.key === 'B') {
            e.preventDefault();
            previousTrack();
        } else if (e.key === 'm' || e.key === 'M') {
            e.preventDefault();
            togglePlayer();
        } else if (e.key === 's' || e.key === 'S') {
            e.preventDefault();
            toggleShuffle();
        }
    });

    // 자동 슬라이드 기능 (클릭하면 멈춤)
    let autoSlide = setInterval(nextSlide, 15000);

    document.addEventListener('click', function(e) {
        // 음악 플레이어나 네비게이션 클릭은 자동 슬라이드를 멈추지 않음
        if (!e.target.closest('.music-player') && !e.target.closest('.navigation')) {
            clearInterval(autoSlide);
        }
    });

    // 초기화
    document.addEventListener('DOMContentLoaded', function() {
        updateCurrentTrack();
        updatePlaylistHighlight();
        initializeDrag();
        changeVolume(); // 초기 볼륨 표시
    });
</script>
</body>
</html>
